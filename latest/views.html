<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Views · ImageCore documentation</title><link href="assets/documenter.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script></head><body><nav class="toc"><h1>ImageCore</h1><form class="search" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">ImageCore.jl</a></li><li class="current"><a class="toctext" href="views.html">Views</a><ul class="internal"></ul></li><li><a class="toctext" href="traits.html">Traits</a></li><li><a class="toctext" href="reference.html">Reference</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="views.html">Views</a></li></ul><a class="edit-page" href="https://github.com/JuliaImages/ImageCore.jl/tree/14fff6c35c57596ab10f5940c04421500669f77d/docs/src/views.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/></header><h1><a class="nav-anchor" id="Views-1" href="#Views-1">Views</a></h1><p>ImageCore provides several different kinds of &quot;views.&quot; Generically, a view is an <em>interpretation</em> of array data, one that may change the apparent meaning of the array but which shares the same underlying storage: change an element of the view, and you also change the original array. Views allow one to process images of immense size without making copies, and write algorithms in the most convenient format often without having to worry about the potential cost of converting from one format to another.</p><p>To illustrate views, it&#39;s helpful to begin with a very simple image:</p><pre><code class="language-julia">julia&gt; using Colors

julia&gt; img = [RGB(1,0,0) RGB(0,1,0);
              RGB(0,0,1) RGB(0,0,0)]
2×2 Array{ColorTypes.RGB{FixedPointNumbers.UFixed{UInt8,8}},2}:
 RGB{U8}(1.0,0.0,0.0)  RGB{U8}(0.0,1.0,0.0)
 RGB{U8}(0.0,0.0,1.0)  RGB{U8}(0.0,0.0,0.0)</code></pre><p><code>RGB</code> is described in the <a href="https://github.com/JuliaGraphics/Colors.jl">Colors package</a>, and the image is just a plain 2×2 array containing red, green, blue, and black pixels.  In Julia&#39;s color package, &quot;1&quot; means &quot;saturated&quot; (e.g., &quot;full red&quot;), and &quot;0&quot; means &quot;black&quot;.  In a moment you&#39;ll see that&#39;s true no matter how the information is represented internally.</p><p>As with all of Julia&#39;s arrays, you can access individual elements:</p><pre><code class="language-julia">julia&gt; img[1,2]
RGB{U8}(0.0,1.0,0.0)</code></pre><p>One of the nice things about this representation of the image is that all of the indices in <code>img[i,j,...]</code> correspond to locations in the image: you don&#39;t need to worry about some dimensions of the array corresponding to &quot;color channels&quot; and other the spatial location, and you&#39;re guaranteed to get the entire pixel contents when you access that location.</p><p>That said, occassionally there are reasons to want to treat <code>RGB</code> as a 3-component vector.  That&#39;s motivation for introducing our first view:</p><pre><code class="language-julia">julia&gt; v = channelview(img)
3×2×2 ImageCore.ChannelView{FixedPointNumbers.UFixed{UInt8,8},3,Array{ColorTypes.RGB{FixedPointNumbers.UFixed{UInt8,8}},2}}:
[:, :, 1] =
 UFixed8(1.0)  UFixed8(0.0)
 UFixed8(0.0)  UFixed8(0.0)
 UFixed8(0.0)  UFixed8(1.0)

[:, :, 2] =
 UFixed8(0.0)  UFixed8(0.0)
 UFixed8(1.0)  UFixed8(0.0)
 UFixed8(0.0)  UFixed8(0.0)</code></pre><p><code>v</code> is a 3×2×2 array of numbers (<code>UFixed8</code> is defined in <a href="https://github.com/JeffBezanson/FixedPointNumbers.jl">FixedPointNumbers</a> and can be abbreviated as <code>U8</code>), where the three elements of the first dimension correspond to the red, green, and blue color channels, respectively. <code>channelview</code> does exactly what the name suggests: provide a view of the array using separate channels for the color components.</p><p>If you&#39;re not familiar with <code>UFixed8</code>, then you may find another view type, <code>rawview</code>, illuminating:</p><pre><code class="language-julia">julia&gt; r = rawview(v)
3×2×2 MappedArrays.MappedArray{UInt8,3,ImageCore.ChannelView{FixedPointNumbers.UFixed{UInt8,8},3,Array{ColorTypes.RGB{FixedPointNumbers.UFixed{UInt8,8}},2}},ImageCore.##11#13,ImageCore.##12#14{FixedPointNumbers.UFixed{UInt8,8}}}:
[:, :, 1] =
 0xff  0x00
 0x00  0x00
 0x00  0xff

[:, :, 2] =
 0x00  0x00
 0xff  0x00
 0x00  0x00</code></pre><p>This is an array of <code>UInt8</code> numbers, with 0 printed as 0x00 and 255 printed as 0xff. Despite the apparent &quot;floating point&quot; representation of the image above, we see that it&#39;s actually represented using 8-bit unsigned integers.  The <code>UFixed8</code> type presents such an integer as a fixed-point number ranging from 0 to 1.  As a consequence, there is no discrepancy in &quot;meaning&quot; between the encoding of images represented as floating point or 8-bit or 16-bit integers: 0 always means &quot;black&quot; and 1 always means &quot;white&quot; or &quot;saturated.&quot;</p><p>Let&#39;s make a change in one of the entries:</p><pre><code class="language-julia">julia&gt; r[3,1,1] = 128
128

julia&gt; r
3×2×2 MappedArrays.MappedArray{UInt8,3,ImageCore.ChannelView{FixedPointNumbers.UFixed{UInt8,8},3,Array{ColorTypes.RGB{FixedPointNumbers.UFixed{UInt8,8}},2}},ImageCore.##11#13,ImageCore.##12#14{FixedPointNumbers.UFixed{UInt8,8}}}:
[:, :, 1] =
 0xff  0x00
 0x00  0x00
 0x80  0xff

[:, :, 2] =
 0x00  0x00
 0xff  0x00
 0x00  0x00

julia&gt; v
3×2×2 ImageCore.ChannelView{FixedPointNumbers.UFixed{UInt8,8},3,Array{ColorTypes.RGB{FixedPointNumbers.UFixed{UInt8,8}},2}}:
[:, :, 1] =
 UFixed8(1.0)    UFixed8(0.0)
 UFixed8(0.0)    UFixed8(0.0)
 UFixed8(0.502)  UFixed8(1.0)

[:, :, 2] =
 UFixed8(0.0)  UFixed8(0.0)
 UFixed8(1.0)  UFixed8(0.0)
 UFixed8(0.0)  UFixed8(0.0)

julia&gt; img
2×2 Array{ColorTypes.RGB{FixedPointNumbers.UFixed{UInt8,8}},2}:
 RGB{U8}(1.0,0.0,0.502)  RGB{U8}(0.0,1.0,0.0)
 RGB{U8}(0.0,0.0,1.0)    RGB{U8}(0.0,0.0,0.0)</code></pre><p>The hexidecimal representation of 128 is 0x80; this is approximately halfway to 255, and as a consequence the <code>UFixed8</code> representation is very near 0.5.  You can see the same change is reflected in <code>r</code>, <code>v</code>, and <code>img</code>: there is only one underlying array, <code>img</code>, and the two views simply reference it.</p><p>Maybe you&#39;re used to having the color channel be the last dimension, rather than the first. We can achieve that using <code>permuteddimsview</code>:</p><pre><code class="language-julia">julia&gt; p = permuteddimsview(v, (2,3,1))
2×2×3 Base.PermutedDimsArrays.PermutedDimsArray{FixedPointNumbers.UFixed{UInt8,8},3,(2,3,1),(3,1,2),ImageCore.ChannelView{FixedPointNumbers.UFixed{UInt8,8},3,Array{ColorTypes.RGB{FixedPointNumbers.UFixed{UInt8,8}},2}}}:
[:, :, 1] =
 UFixed8(1.0)  UFixed8(0.0)
 UFixed8(0.0)  UFixed8(0.0)

[:, :, 2] =
 UFixed8(0.0)  UFixed8(1.0)
 UFixed8(0.0)  UFixed8(0.0)

[:, :, 3] =
 UFixed8(0.502)  UFixed8(0.0)
 UFixed8(1.0)    UFixed8(0.0)

julia&gt; p[1,2,:] = 0.25
0.25

julia&gt; p
2×2×3 Base.PermutedDimsArrays.PermutedDimsArray{FixedPointNumbers.UFixed{UInt8,8},3,(2,3,1),(3,1,2),ImageCore.ChannelView{FixedPointNumbers.UFixed{UInt8,8},3,Array{ColorTypes.RGB{FixedPointNumbers.UFixed{UInt8,8}},2}}}:
[:, :, 1] =
 UFixed8(1.0)  UFixed8(0.251)
 UFixed8(0.0)  UFixed8(0.0)

[:, :, 2] =
 UFixed8(0.0)  UFixed8(0.251)
 UFixed8(0.0)  UFixed8(0.0)

[:, :, 3] =
 UFixed8(0.502)  UFixed8(0.251)
 UFixed8(1.0)    UFixed8(0.0)

julia&gt; v
3×2×2 ImageCore.ChannelView{FixedPointNumbers.UFixed{UInt8,8},3,Array{ColorTypes.RGB{FixedPointNumbers.UFixed{UInt8,8}},2}}:
[:, :, 1] =
 UFixed8(1.0)    UFixed8(0.0)
 UFixed8(0.0)    UFixed8(0.0)
 UFixed8(0.502)  UFixed8(1.0)

[:, :, 2] =
 UFixed8(0.251)  UFixed8(0.0)
 UFixed8(0.251)  UFixed8(0.0)
 UFixed8(0.251)  UFixed8(0.0)

julia&gt; img
2×2 Array{ColorTypes.RGB{FixedPointNumbers.UFixed{UInt8,8}},2}:
 RGB{U8}(1.0,0.0,0.502)  RGB{U8}(0.251,0.251,0.251)
 RGB{U8}(0.0,0.0,1.0)    RGB{U8}(0.0,0.0,0.0)</code></pre><p>Once again, <code>p</code> is a view, and as a consequence changing it leads to changes in all the coupled arrays and views.</p><footer><hr/><a class="previous" href="index.html"><span class="direction">Previous</span><span class="title">ImageCore.jl</span></a><a class="next" href="traits.html"><span class="direction">Next</span><span class="title">Traits</span></a></footer></article></body></html>
